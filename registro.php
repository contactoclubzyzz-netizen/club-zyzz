<?php error_reporting(E_ALL); ini_set('display_errors', 1); require 'conexion.php'; if ($_SERVER['REQUEST_METHOD'] === 'POST') { $nombre = trim($_POST['nombre']); $email = trim($_POST['email']); $password = trim($_POST['contrasena']); // âš ï¸ AquÃ­ coincide con el input name // ğŸ”¹ Verificar que el correo tenga un dominio real $dominio = substr(strrchr($email, "@"), 1); if (!checkdnsrr($dominio, "MX")) { echo "<script>alert('âŒ El correo ingresado no es real.'); window.history.back();</script>"; exit(); } // ğŸ”¹ Verificar que el correo no estÃ© repetido en la base de datos $checkEmail = $conexion->prepare("SELECT id FROM usuarios WHERE email = ?"); $checkEmail->bind_param("s", $email); $checkEmail->execute(); $checkEmail->store_result(); if ($checkEmail->num_rows > 0) { echo "<script>alert('âš ï¸ Este correo ya estÃ¡ registrado.'); window.history.back();</script>"; exit(); } $checkEmail->close(); // Encriptar contraseÃ±a $passwordHash = password_hash($password, PASSWORD_DEFAULT); // Insertar usuario $sql = "INSERT INTO usuarios (nombre, email, contrasena) VALUES (?, ?, ?)"; $stmt = $conexion->prepare($sql); $stmt->bind_param("sss", $nombre, $email, $passwordHash); if ($stmt->execute()) { // âœ… Mostrar mensaje de Ã©xito y luego redirigir echo "<script> alert('âœ… Registro exitoso. Â¡Bienvenido a CLUB ZYZZ!'); window.location.href = 'login.php'; </script>"; exit(); } else { echo "Error al registrar: " . $conexion->error; } $stmt->close(); } ?> <!DOCTYPE html> <html lang="es"> <head> <meta charset="UTF-8"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <title>Registro | CLUB ZYZZ</title> <link rel="stylesheet" href="css/estilo.css"> </head> <body> <h1>CLUB ZYZZ</h1> <h2>Crea tu cuenta</h2> <div class="register-box"> <form method="POST" action=""> <input type="text" name="nombre" placeholder="Nombre completo" required> <input type="email" name="email" placeholder="Correo electrÃ³nico" required> <input type="password" name="contrasena" placeholder="ContraseÃ±a" required> <button type="submit">Registrarme</button> </form> <div class="back-link"> Â¿Ya tienes cuenta? â€” <a href="login.php">Iniciar sesiÃ³n</a> </div> </div> </body> </html>
